<html>
	<head>
		<title>Pilih Template</title>
		<meta http-equiv="Content-Type" content="text/html;"> 
		<link rel="stylesheet" type="text/css" href="style.css">
		<script src="jquery.js" type="text/javascript"></script>
		<script src="jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="container">
			<div id="outer_container" style="width:1000px; height:200px;">
				<div id="inner_container" style="height:200px; background-color:blue;">
					<div class="item">
						<img src="vbasdasc" />
					</div>
					<div class="item">
					</div>
					<div class="item">
					</div>
					<div class="item">
					</div>
					<div class="item">
					</div>
					<div class="item">
					</div>
					<div class="item">
					</div>
					<div class="item">
					</div>
				</div>
			</div>
			<div id="image" style="width:600px; height:400px; background-color:green; margin:auto;">
				<img />
			</div>
			<form id="data_template" style="margin:auto;width:100px;">
				<input type="hidden" value="1"></input>
				<input type="submit" value="Pilih"></input>
			</form>
		</div>
		<script>
			$(document).ready(function ()
			{
				var left = 0;
				var post_awal = $("#inner_container").position().left;
				var cont_post = $("#inner_container").position();
				var items_width = $(".item").width();
				var items = $("#inner_container > div.item").length;
				var post_akhir = (post_awal + (items-3)*(items_width))*-1;
				var cont_post_temp;
				
				$("#inner_container").draggable({axis:"x", revert:true});
				
				function bindMouseUp()
				{
					$("#inner_container").unbind('mouseup');
					cont_post_temp = $("#inner_container").position().left;
					if (cont_post.left > cont_post_temp )
					{
						// swipe to right
						$("#inner_container").draggable("option","revert",false);
						var moveLeft = Math.abs(cont_post.left - cont_post_temp);
						if (left-moveLeft < post_akhir)
						{
							moveLeft = Math.abs(cont_post_temp - post_akhir);
							left = post_akhir;
							$("#inner_container").animate(
							{
								left: '+=' + moveLeft
							},500, function() {
								$("#inner_container").draggable("option","revert",true);
								cont_post = $("#inner_container").position();
								$("#inner_container").bind('mouseup', function() {bindMouseUp();});
							});
						}
						else
						{
							left -= moveLeft*2;
							$("#inner_container").animate(
							{
								left: '-=' + moveLeft
							},500, function() {
								$("#inner_container").draggable("option","revert",true);
								cont_post = $("#inner_container").position();
								$("#inner_container").bind('mouseup', function() {bindMouseUp();});
							});
						}
					}
					else if (cont_post.left < cont_post_temp)
					{
						// swipe to left
						$("#inner_container").draggable("option","revert",false);
						var moveLeft = Math.abs(cont_post_temp - cont_post.left);
						if (left+moveLeft >= post_awal)
						{
							moveLeft = Math.abs(post_awal - cont_post_temp);
							left = post_awal;
							$("#inner_container").animate(
							{
								left: '-=' + moveLeft
							},500, function() {
								$("#inner_container").draggable("option","revert",true);
								cont_post = $("#inner_container").position();
								$("#inner_container").bind('mouseup', function() {bindMouseUp();});
							});
						}
						else
						{
							left = cont_post_temp + moveLeft;
							$("#inner_container").animate(
							{
								left: '+=' + moveLeft
							},500, function() {
								$("#inner_container").draggable("option","revert",true);
								cont_post = $("#inner_container").position();
								$("#inner_container").bind('mouseup', function() {bindMouseUp();});
							});
						}
					}
					else
					{
						// on the beginning or end item swipe
						$("#inner_container").draggable("option","revert",true);
						$("#inner_container").bind('mouseup', function() {bindMouseUp();});
					}
				} 
				
				$("#inner_container").mouseup(function() {
					bindMouseUp();
				});
				
				$(".item").click(function() {
					$(".item").removeClass('choosen');
					var src = $(this).children("img").attr("src");
					$(this).addClass('choosen');
					$("#image").children("img").attr("src",src);
				});
				
			});
		</script>
	</body>
</html>